---
title: Linux  Crontab 定时任务
categories:
  - 服务器
date: 2018-04-15 07:41:22
---

**用例：linux 定时任务+github 备份文件**

**简介**

linux 系统则是由 cron (crond) 这个系统服务来控制的。Linux 系统上面原本就有非常多的计划性工作，因此这个系统服务是默认启动的。另 外, 由于使用者自己也可以设置计划任务，所以， Linux 系统也提供了使用者控制计划任务的命令 :crontab 命令。

Linux下的任务调度分为两类，系统任务调度和用户任务调度。

*   系统任务调度：系统周期性所要执行的工作，比如写缓存数据到硬盘、日志清理等。在/etc目录下有一个crontab文件，这个就是系统任务调度的配置文件。
    
*   用户调度任务：在 /var/spool/cron/ 文件夹下有对应用户名的文件。这些文件就是用户调度任务的配置文件。
    

**用法**

1.  通过编辑配置文件添加调度任务。
2.  重启或重载调度服务

**系统调度配置用例：**

    # For details see man 4 crontabs
    
    # Example of job definition:
    # .---------------- minute (0 - 59)
    # |  .------------- hour (0 - 23)
    # |  |  .---------- day of month (1 - 31)
    # |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
    # |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
    # |  |  |  |  |
    # *  *  *  *  * user-name  command to be executed
      *  */10  *  *  * root /home/cron/test.sh  # 每10分钟执行一次，执行用户为root
      10 12  *  *  * root /home/cron/test.sh  # 每天12点10分执行一次，执行用户为root
    

**配置解读**

*   minute： 表示分钟，可以是从0到59之间的任何整数。
    
*   hour：表示小时，可以是从0到23之间的任何整数。
    
*   day：表示日期，可以是从1到31之间的任何整数。
    
*   month：表示月份，可以是从1到12之间的任何整数。
    
*   week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。
    
*   user-name： 执行命令的用户名。
    
*   command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。
    

**特殊字符：**

*   星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。
    
*   逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”。
    
*   中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”。
    
*   正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。
    

用户调度配置的规则和系统的唯一的差别就是时不用用户调度任务不用再设置执行的用户了。

**启动、关闭、重启、重载：**

    sbin/service crond start //启动服务
    /sbin/service crond stop //关闭服务
    /sbin/service crond restart //重启服务
    /sbin/service crond reload //重新载入配置
    

**查看日志命令**

    tail -f /var/log/cron